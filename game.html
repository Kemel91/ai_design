<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ - –ê–º—É–ª–µ—Ç –¥—Ä–∞–∫–æ–Ω–∞</title>
    <meta name="description" content="–¢–µ–∫—Å—Ç–æ–≤–∞—è MMORPG - –ê–º—É–ª–µ—Ç –¥—Ä–∞–∫–æ–Ω–∞. –ò–≥—Ä–∞–π—Ç–µ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="scripts.js" as="script">
    <link rel="preload" href="components.js" as="script">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dragon: {
                            50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8',
                            400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46',
                            800: '#27272a', 900: '#18181b',
                        },
                        blood: {
                            50: '#fef2f2', 100: '#fee2e2', 200: '#fecaca', 300: '#fca5a5',
                            400: '#f87171', 500: '#ef4444', 600: '#dc2626', 700: '#b91c1c',
                            800: '#991b1b', 900: '#7f1d1d',
                        },
                        gold: {
                            50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d',
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
                            800: '#92400e', 900: '#78350f',
                        }
                    },
                    fontFamily: { 'medieval': ['serif'] },
                    screens: { 'xs': '475px' }
                }
            }
        }
    </script>
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="styles.css">
    
    <style>
        .game-container {
            height: calc(100vh - 2rem);
            max-height: 900px;
        }
        
        .health-bar {
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
        }
        
        .mana-bar {
            background: linear-gradient(90deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        
        .exp-bar {
            background: linear-gradient(90deg, #059669 0%, #10b981 50%, #34d399 100%);
        }
        
        .chat-message {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .npc-interactive:hover {
            background: linear-gradient(145deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));
            border-left: 4px solid #f59e0b;
        }
        
        .player-interactive:hover {
            background: linear-gradient(145deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05));
            border-left: 4px solid #10b981;
        }
        
        .enemy-interactive:hover {
            background: linear-gradient(145deg, rgba(220, 38, 38, 0.1), rgba(127, 29, 29, 0.05));
            border-left: 4px solid #dc2626;
        }
        
        .item-interactive:hover {
            background: linear-gradient(145deg, rgba(168, 85, 247, 0.1), rgba(124, 58, 237, 0.05));
            border-left: 4px solid #a855f7;
        }
        
        .location-exit {
            transition: all 0.3s ease;
        }
        
        .location-exit:hover {
            background: linear-gradient(45deg, rgba(127, 29, 29, 0.3), rgba(185, 28, 28, 0.2));
            transform: translateY(-2px);
        }
        
        .action-menu {
            display: none;
            position: absolute;
            z-index: 50;
            min-width: 200px;
        }
        
        .action-menu.show {
            display: block;
        }
        
        .typing-indicator {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body class="dragon-bg min-h-screen text-white" style="background-color: #0a0a0a !important;">
    
    <!-- Game Interface -->
    <div class="p-2 sm:p-4">
        <div class="max-w-7xl mx-auto game-container">
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-2 sm:gap-4 h-full">
                
                <!-- Player Stats Panel -->
                <div class="lg:col-span-1 space-y-2 sm:space-y-4">
                    
                    <!-- Player Info -->
                    <div class="dragon-card rounded-xl p-3 sm:p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-gold-500 to-gold-700 rounded-full flex items-center justify-center text-xl font-bold">
                                ‚öî
                            </div>
                            <div class="ml-3">
                                <h2 class="font-medieval font-bold text-gold-400 text-sm sm:text-base" id="playerName">–ö—Ä–æ–≤–∞–≤—ã–π–ö–ª–∏–Ω–æ–∫</h2>
                                <p class="text-xs text-dragon-300">–£—Ä–æ–≤–µ–Ω—å <span id="playerLevel">15</span> –í–æ–∏–Ω</p>
                            </div>
                        </div>
                        
                        <!-- Health Bar -->
                        <div class="mb-2">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-red-400">‚ù§ –ó–¥–æ—Ä–æ–≤—å–µ</span>
                                <span id="healthText">85/100</span>
                            </div>
                            <div class="w-full bg-dragon-800 rounded-full h-2">
                                <div class="health-bar h-2 rounded-full" style="width: 85%" id="healthBar"></div>
                            </div>
                        </div>
                        
                        <!-- Mana Bar -->
                        <div class="mb-2">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-blue-400">üîÆ –ú–∞–Ω–∞</span>
                                <span id="manaText">45/60</span>
                            </div>
                            <div class="w-full bg-dragon-800 rounded-full h-2">
                                <div class="mana-bar h-2 rounded-full" style="width: 75%" id="manaBar"></div>
                            </div>
                        </div>
                        
                        <!-- Experience Bar -->
                        <div class="mb-3">
                            <div class="flex justify-between text-xs mb-1">
                                <span class="text-green-400">‚≠ê –û–ø—ã—Ç</span>
                                <span id="expText">2,340/3,000</span>
                            </div>
                            <div class="w-full bg-dragon-800 rounded-full h-2">
                                <div class="exp-bar h-2 rounded-full" style="width: 78%" id="expBar"></div>
                            </div>
                        </div>
                        
                        <!-- Additional Stats -->
                        <div class="grid grid-cols-2 gap-2 text-xs">
                            <div class="text-center">
                                <div class="text-gold-400 font-semibold" id="playerGold">1,250</div>
                                <div class="text-dragon-400">üí∞ –ó–æ–ª–æ—Ç–æ</div>
                            </div>
                            <div class="text-center">
                                <div class="text-purple-400 font-semibold" id="playerGuild">–°—Ç–∞–ª—å–Ω—ã–µ –í–æ–ª–∫–∏</div>
                                <div class="text-dragon-400">üõ° –ö–ª–∞–Ω</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="dragon-card rounded-xl p-3 sm:p-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                        <div class="grid grid-cols-1 gap-2">
                            <button class="btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="openInventory()">
                                üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
                            </button>
                            <button class="btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="openSpells()">
                                üìú –ó–∞–∫–ª–∏–Ω–∞–Ω–∏—è
                            </button>
                            <button class="btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="openQuests()">
                                üìã –ö–≤–µ—Å—Ç—ã
                            </button>
                            <button class="btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="openSettings()">
                                ‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                        </div>
                    </div>
                    
                    <!-- Online Players -->
                    <div class="dragon-card rounded-xl p-3 sm:p-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üë• –í —Å–µ—Ç–∏ (12)</h3>
                        <div class="space-y-1 max-h-32 overflow-y-auto text-xs" id="onlineList">
                            <div class="flex items-center justify-between py-1">
                                <span class="text-green-400">üü¢ –¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞</span>
                                <span class="text-dragon-400">–£—Ä.23</span>
                            </div>
                            <div class="flex items-center justify-between py-1">
                                <span class="text-green-400">üü¢ –û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è</span>
                                <span class="text-dragon-400">–£—Ä.18</span>
                            </div>
                            <div class="flex items-center justify-between py-1">
                                <span class="text-green-400">üü¢ –ú–∞—Å—Ç–µ—Ä–ö–ª–∏–Ω–∫–∞</span>
                                <span class="text-dragon-400">–£—Ä.31</span>
                            </div>
                        </div>
                    </div>
                    
                </div>
                
                <!-- Main Game Area -->
                <div class="lg:col-span-2 space-y-2 sm:space-y-4">
                    
                    <!-- Location Description -->
                    <div class="dragon-card rounded-xl p-4 sm:p-6">
                        <h1 class="font-medieval text-xl sm:text-2xl font-bold text-gold-400 mb-3 flex items-center">
                            üç∫ –¢–∞–≤–µ—Ä–Ω–∞ "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω"
                        </h1>
                        <p class="font-story text-dragon-200 text-sm leading-relaxed mb-4">
                            –£—é—Ç–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–µ–ø–ª—ã–º —Å–≤–µ—Ç–æ–º –∫–∞–º–∏–Ω–∞ –∏ –∞—Ä–æ–º–∞—Ç–æ–º –∂–∞—Ä–µ–Ω–æ–≥–æ –º—è—Å–∞. –ó–∞ –¥—É–±–æ–≤—ã–º–∏ —Å—Ç–æ–ª–∞–º–∏ —Å–∏–¥—è—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏, –æ–±—Å—É–∂–¥–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏ –¥–µ–ª—è—Å—å –∏—Å—Ç–æ—Ä–∏—è–º–∏ –æ —Å–≤–æ–∏—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ö. –ë–∞—Ä–º–µ–Ω-–ø–æ–ª—É—Ä–æ—Å–ª–∏–∫ –≤–µ—Å–µ–ª–æ –Ω–∞–ø–µ–≤–∞–µ—Ç –ø–µ—Å–Ω—é, –ø—Ä–æ—Ç–∏—Ä–∞—è –∫—Ä—É–∂–∫–∏. –í —É–≥–ª—É —É –∫–∞–º–∏–Ω–∞ –¥—Ä–µ–º–ª–µ—Ç —Å—Ç–∞—Ä—ã–π –∫–æ—Ç, –∞ –ø–æ–¥ —Å—Ç–æ–ª–∞–º–∏ —Å–Ω—É—é—Ç –Ω–∞–≥–ª—ã–µ –∫—Ä—ã—Å—ã, –Ω–∞–¥–µ—è—Å—å –ø–æ–∂–∏–≤–∏—Ç—å—Å—è –∫—Ä–æ—à–∫–∞–º–∏.
                        </p>
                        
                        <!-- Location Exits -->
                        <div class="mb-4">
                            <h3 class="font-medieval font-semibold text-gold-400 mb-2 text-sm">üö™ –í—ã—Ö–æ–¥—ã:</h3>
                            <div class="flex flex-wrap gap-2">
                                <button class="location-exit btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="goToLocation('square')">
                                    üèõ –ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å
                                </button>
                                <button class="location-exit btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="goToLocation('rooms')">
                                    üõè –ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ—è–ª—å—Ü–µ–≤
                                </button>
                                <button class="location-exit btn-secondary px-3 py-2 rounded-lg font-medieval text-xs" onclick="goToLocation('cellar')">
                                    üï≥ –ü–æ–¥–≤–∞–ª
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Entities in Location -->
                    <div class="dragon-card rounded-xl p-4 sm:p-6">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-4 text-sm sm:text-base">üëÅ –í –ª–æ–∫–∞—Ü–∏–∏:</h3>
                        <div class="space-y-2" id="locationEntities">
                            
                            <!-- NPCs -->
                            <div class="npc-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'npc', 'barman')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üßî</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-gold-400">–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥</span>
                                            <p class="text-xs text-dragon-300">–ü–æ–ª—É—Ä–æ—Å–ª–∏–∫-—Ç—Ä–∞–∫—Ç–∏—Ä—â–∏–∫, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ —É–ª—ã–±–∞–µ—Ç—Å—è</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-gold-500">NPC</span>
                                </div>
                            </div>
                            
                            <!-- Players -->
                            <div class="player-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'player', 'shadowkiller')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üó°</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-green-400">–¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä–æ–≤–µ–Ω—å 23 –†–∞–∑–±–æ–π–Ω–∏–∫, —Ç–æ—á–∏—Ç –∫–∏–Ω–∂–∞–ª</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-green-500">–ò–≥—Ä–æ–∫</span>
                                </div>
                            </div>
                            
                            <div class="player-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'player', 'firevalkyrie')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üî•</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-green-400">–û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è</span>
                                            <p class="text-xs text-dragon-300">–£—Ä–æ–≤–µ–Ω—å 18 –ú–∞–≥, –∏–∑—É—á–∞–µ—Ç –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-green-500">–ò–≥—Ä–æ–∫</span>
                                </div>
                            </div>
                            
                            <!-- Enemies -->
                            <div class="enemy-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'enemy', 'rat1')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üêÄ</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-red-400">–ù–∞–≥–ª–∞—è –∫—Ä—ã—Å–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä–æ–≤–µ–Ω—å 2, –≥—Ä—ã–∑–µ—Ç –∫–æ—Å—Ç—å –ø–æ–¥ —Å—Ç–æ–ª–æ–º</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-red-500">–í—Ä–∞–≥</span>
                                </div>
                            </div>
                            
                            <div class="enemy-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'enemy', 'rat2')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üêÄ</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-red-400">–ñ–∏—Ä–Ω–∞—è –∫—Ä—ã—Å–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä–æ–≤–µ–Ω—å 3, —à–∞—Ä–∏—Ç—Å—è –ø–æ —É–≥–ª–∞–º</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-red-500">–í—Ä–∞–≥</span>
                                </div>
                            </div>
                            
                            <!-- Items -->
                            <div class="item-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'item', 'coin')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">ü™ô</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-purple-400">–ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞</span>
                                            <p class="text-xs text-dragon-300">–ë–ª–µ—Å—Ç–∏—Ç –Ω–∞ –ø–æ–ª—É –≤–æ–∑–ª–µ –±–∞—Ä–∞</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-purple-500">–ü—Ä–µ–¥–º–µ—Ç</span>
                                </div>
                            </div>
                            
                            <div class="item-interactive p-3 rounded-lg border-l-4 border-transparent cursor-pointer transition-all" onclick="showActionMenu(event, 'item', 'dagger')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-lg mr-3">üó°</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-purple-400">–°—Ç–∞—Ä—ã–π –∫–∏–Ω–∂–∞–ª</span>
                                            <p class="text-xs text-dragon-300">–õ–µ–∂–∏—Ç –∑–∞–±—ã—Ç—ã–π –≤ —É–≥–ª—É</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-purple-500">–ü—Ä–µ–¥–º–µ—Ç</span>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                </div>
                
                <!-- Chat Panel -->
                <div class="lg:col-span-1">
                    <div class="dragon-card rounded-xl p-3 sm:p-4 h-full flex flex-col">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üí¨ –ß–∞—Ç</h3>
                        
                        <!-- Chat Messages -->
                        <div class="flex-1 overflow-y-auto mb-3 space-y-2 text-xs" id="chatMessages" style="min-height: 200px; max-height: 400px;">
                            <div class="chat-message">
                                <span class="text-green-400">[–¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞]:</span>
                                <span class="text-dragon-200">–ö—Ç–æ-–Ω–∏–±—É–¥—å –∑–Ω–∞–µ—Ç, –≥–¥–µ –Ω–∞–π—Ç–∏ –ú–∞—Å—Ç–µ—Ä–∞ –ö–ª–∏–Ω–∫–æ–≤?</span>
                            </div>
                            <div class="chat-message">
                                <span class="text-gold-400">[–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥]:</span>
                                <span class="text-dragon-200">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–∞–≤–µ—Ä–Ω—É, –ø—É—Ç–Ω–∏–∫!</span>
                            </div>
                            <div class="chat-message">
                                <span class="text-green-400">[–û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è]:</span>
                                <span class="text-dragon-200">–ò—â—É –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ—Ö–æ–¥–∞ –≤ –¢–µ–º–Ω—ã–π –ª–µ—Å</span>
                            </div>
                            <div class="chat-message">
                                <span class="text-blue-400">[–°–∏—Å—Ç–µ–º–∞]:</span>
                                <span class="text-dragon-300">–ú–∞—Å—Ç–µ—Ä–ö–ª–∏–Ω–∫–∞ –≤–æ—à–µ–ª –≤ –∏–≥—Ä—É</span>
                            </div>
                            <div class="chat-message">
                                <span class="text-green-400">[–ö—Ä–æ–≤–∞–≤—ã–π–ö–ª–∏–Ω–æ–∫]:</span>
                                <span class="text-dragon-200">–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º! –ö–∞–∫ –¥–µ–ª–∞?</span>
                            </div>
                        </div>
                        
                        <!-- Chat Input -->
                        <div class="space-y-2">
                            <div class="flex gap-1 text-xs">
                                <button class="chat-mode px-2 py-1 rounded bg-green-600 text-white" data-mode="say">–°–∫–∞–∑–∞—Ç—å</button>
                                <button class="chat-mode px-2 py-1 rounded bg-dragon-600 text-dragon-200" data-mode="yell">–ö—Ä–∏—á–∞—Ç—å</button>
                                <button class="chat-mode px-2 py-1 rounded bg-dragon-600 text-dragon-200" data-mode="whisper">–®–µ–ø—Ç–∞—Ç—å</button>
                            </div>
                            <div class="flex gap-2">
                                <input 
                                    type="text" 
                                    id="chatInput" 
                                    class="form-input flex-1 px-3 py-2 rounded-lg text-xs" 
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                                    maxlength="200"
                                >
                                <button class="btn-dragon px-3 py-2 rounded-lg text-xs" onclick="sendMessage()">
                                    üì§
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    
    <!-- Action Menu -->
    <div id="actionMenu" class="action-menu dragon-card rounded-xl p-3 shadow-2xl">
        <div id="actionMenuContent"></div>
    </div>
    
    <!-- Modals -->
    <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50 p-4">
        <div class="dragon-card rounded-2xl p-6 max-w-md w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-medieval text-xl font-semibold text-gold-400" id="modalTitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                <button onclick="closeModal()" class="text-dragon-400 hover:text-gold-400 text-xl">‚úï</button>
            </div>
            <div id="modalContent" class="font-story text-dragon-200 text-sm"></div>
            <div class="flex justify-end mt-4">
                <button onclick="closeModal()" class="btn-secondary px-4 py-2 rounded-lg font-medieval text-sm">
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="scripts.js"></script>
    <script src="components.js"></script>
    
    <script>
        // Game state
        let currentChatMode = 'say';
        let gameData = {
            player: {
                name: '–ö—Ä–æ–≤–∞–≤—ã–π–ö–ª–∏–Ω–æ–∫',
                level: 15,
                health: 85,
                maxHealth: 100,
                mana: 45,
                maxMana: 60,
                exp: 2340,
                maxExp: 3000,
                gold: 1250,
                guild: '–°—Ç–∞–ª—å–Ω—ã–µ –í–æ–ª–∫–∏'
            },
            location: 'tavern'
        };
        
        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            updatePlayerStats();
            setupChatModes();
            setupChatInput();
            simulateActivity();
            
            console.log('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞ - –¢–∞–≤–µ—Ä–Ω–∞ "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω"');
        });
        
        // Update player statistics display
        function updatePlayerStats() {
            const player = gameData.player;
            
            document.getElementById('playerName').textContent = player.name;
            document.getElementById('playerLevel').textContent = player.level;
            document.getElementById('playerGold').textContent = player.gold.toLocaleString();
            document.getElementById('playerGuild').textContent = player.guild;
            
            // Health bar
            const healthPercent = (player.health / player.maxHealth) * 100;
            document.getElementById('healthBar').style.width = healthPercent + '%';
            document.getElementById('healthText').textContent = `${player.health}/${player.maxHealth}`;
            
            // Mana bar
            const manaPercent = (player.mana / player.maxMana) * 100;
            document.getElementById('manaBar').style.width = manaPercent + '%';
            document.getElementById('manaText').textContent = `${player.mana}/${player.maxMana}`;
            
            // Experience bar
            const expPercent = (player.exp / player.maxExp) * 100;
            document.getElementById('expBar').style.width = expPercent + '%';
            document.getElementById('expText').textContent = `${player.exp.toLocaleString()}/${player.maxExp.toLocaleString()}`;
        }
        
        // Show action menu
        function showActionMenu(event, type, id) {
            const menu = document.getElementById('actionMenu');
            const content = document.getElementById('actionMenuContent');
            
            // Hide menu first
            menu.classList.remove('show');
            
            // Position menu
            const rect = event.currentTarget.getBoundingClientRect();
            menu.style.left = (rect.right + 10) + 'px';
            menu.style.top = rect.top + 'px';
            
            // Generate menu content based on type
            let menuHTML = '';
            
            switch(type) {
                case 'npc':
                    menuHTML = `
                        <div class="space-y-2">
                            <h4 class="font-medieval font-semibold text-gold-400 text-sm mb-2">–î–µ–π—Å—Ç–≤–∏—è —Å NPC:</h4>
                            <button onclick="talkToNPC('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å</button>
                            <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                            <button onclick="tradeWithNPC('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üõí –¢–æ—Ä–≥–æ–≤–∞—Ç—å</button>
                        </div>
                    `;
                    break;
                    
                case 'player':
                    menuHTML = `
                        <div class="space-y-2">
                            <h4 class="font-medieval font-semibold text-green-400 text-sm mb-2">–î–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–∫–æ–º:</h4>
                            <button onclick="talkToPlayer('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üí¨ –°–∫–∞–∑–∞—Ç—å</button>
                            <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                            <button onclick="attackPlayer('${id}')" class="w-full btn-dragon px-3 py-2 rounded-lg font-medieval text-xs">‚öî –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                            <button onclick="inviteToGroup('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üë• –í –≥—Ä—É–ø–ø—É</button>
                        </div>
                    `;
                    break;
                    
                case 'enemy':
                    menuHTML = `
                        <div class="space-y-2">
                            <h4 class="font-medieval font-semibold text-red-400 text-sm mb-2">–î–µ–π—Å—Ç–≤–∏—è —Å –≤—Ä–∞–≥–æ–º:</h4>
                            <button onclick="attackEnemy('${id}')" class="w-full btn-dragon px-3 py-2 rounded-lg font-medieval text-xs">‚öî –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                            <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                            <button onclick="castSpellOn('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üîÆ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ</button>
                        </div>
                    `;
                    break;
                    
                case 'item':
                    menuHTML = `
                        <div class="space-y-2">
                            <h4 class="font-medieval font-semibold text-purple-400 text-sm mb-2">–î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–µ–¥–º–µ—Ç–æ–º:</h4>
                            <button onclick="takeItem('${id}')" class="w-full btn-dragon px-3 py-2 rounded-lg font-medieval text-xs">üì¶ –í–∑—è—Ç—å</button>
                            <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                            <button onclick="useItem('${id}')" class="w-full btn-secondary px-3 py-2 rounded-lg font-medieval text-xs">‚ú® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                        </div>
                    `;
                    break;
            }
            
            content.innerHTML = menuHTML;
            menu.classList.add('show');
            
            // Hide menu when clicking outside
            setTimeout(() => {
                document.addEventListener('click', hideActionMenu, { once: true });
            }, 100);
        }
        
        function hideActionMenu(event) {
            const menu = document.getElementById('actionMenu');
            if (!menu.contains(event.target)) {
                menu.classList.remove('show');
            }
        }
        
        // Chat system
        function setupChatModes() {
            document.querySelectorAll('.chat-mode').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.chat-mode').forEach(b => {
                        b.classList.remove('bg-green-600', 'text-white');
                        b.classList.add('bg-dragon-600', 'text-dragon-200');
                    });
                    
                    this.classList.remove('bg-dragon-600', 'text-dragon-200');
                    this.classList.add('bg-green-600', 'text-white');
                    
                    currentChatMode = this.dataset.mode;
                });
            });
        }
        
        function setupChatInput() {
            const input = document.getElementById('chatInput');
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }
        
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';
            
            let prefix = '';
            switch(currentChatMode) {
                case 'say':
                    prefix = `<span class="text-green-400">[${gameData.player.name}]:</span>`;
                    break;
                case 'yell':
                    prefix = `<span class="text-yellow-400">[${gameData.player.name} –∫—Ä–∏—á–∏—Ç]:</span>`;
                    break;
                case 'whisper':
                    prefix = `<span class="text-blue-400">[${gameData.player.name} —à–µ–ø—á–µ—Ç]:</span>`;
                    break;
            }
            
            messageDiv.innerHTML = `${prefix} <span class="text-dragon-200">${message}</span>`;
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Clear input
            input.value = '';
            
            // Simulate responses
            setTimeout(() => simulateResponse(message), 1000 + Math.random() * 2000);
        }
        
        function simulateResponse(originalMessage) {
            const responses = [
                { name: '–¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞', message: '–°–æ–≥–ª–∞—Å–µ–Ω —Å —Ç–æ–±–æ–π!' },
                { name: '–û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è', message: '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ...' },
                { name: '–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥', message: '–ï—â–µ —ç–ª—è, –¥—Ä—É–∑—å—è?' },
                { name: '–ú–∞—Å—Ç–µ—Ä–ö–ª–∏–Ω–∫–∞', message: '–ö—Ç–æ-—Ç–æ –≥–æ–≤–æ—Ä–∏–ª –æ –±–∏—Ç–≤–∞—Ö?' }
            ];
            
            if (Math.random() < 0.3) { // 30% chance of response
                const response = responses[Math.floor(Math.random() * responses.length)];
                addChatMessage(response.name, response.message, 'green');
            }
        }
        
        function addChatMessage(name, message, color = 'green') {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';
            messageDiv.innerHTML = `<span class="text-${color}-400">[${name}]:</span> <span class="text-dragon-200">${message}</span>`;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Action handlers
        function talkToNPC(id) {
            hideActionMenu();
            const responses = {
                'barman': '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ—é —Ç–∞–≤–µ—Ä–Ω—É! –£ –Ω–∞—Å –ª—É—á—à–∏–π —ç–ª—å –≤ –≥–æ—Ä–æ–¥–µ –∏ –≥–æ—Ä—è—á–∞—è –µ–¥–∞. –ß—Ç–æ –∂–µ–ª–∞–µ—Ç–µ?'
            };
            addChatMessage('–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥', responses[id] || '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å!', 'gold');
        }
        
        function talkToPlayer(id) {
            hideActionMenu();
            document.getElementById('chatInput').focus();
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', `–í—ã –æ–±—Ä–∞—â–∞–µ—Ç–µ—Å—å –∫ –∏–≥—Ä–æ–∫—É ${id}`, 'blue');
        }
        
        function attackPlayer(id) {
            hideActionMenu();
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', `–í—ã –∞—Ç–∞–∫—É–µ—Ç–µ –∏–≥—Ä–æ–∫–∞ ${id}! –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è PvP –±–æ–π.`, 'red');
        }
        
        function attackEnemy(id) {
            hideActionMenu();
            const enemies = {
                'rat1': '–ù–∞–≥–ª—É—é –∫—Ä—ã—Å—É',
                'rat2': '–ñ–∏—Ä–Ω—É—é –∫—Ä—ã—Å—É'
            };
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', `–í—ã –∞—Ç–∞–∫—É–µ—Ç–µ ${enemies[id]}! –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –±–æ–π.`, 'red');
        }
        
        function takeItem(id) {
            hideActionMenu();
            const items = {
                'coin': '–ó–æ–ª–æ—Ç—É—é –º–æ–Ω–µ—Ç—É (+5 –∑–æ–ª–æ—Ç–∞)',
                'dagger': '–°—Ç–∞—Ä—ã–π –∫–∏–Ω–∂–∞–ª'
            };
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', `–í—ã –ø–æ–¥–±–∏—Ä–∞–µ—Ç–µ ${items[id]}`, 'blue');
            
            // Update gold if coin
            if (id === 'coin') {
                gameData.player.gold += 5;
                updatePlayerStats();
            }
        }
        
        function showInfo(type, id) {
            hideActionMenu();
            
            const infoData = {
                npc: {
                    barman: {
                        title: 'üßî –ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥',
                        content: `
                            <p><strong>–†–∞—Å–∞:</strong> –ü–æ–ª—É—Ä–æ—Å–ª–∏–∫</p>
                            <p><strong>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è:</strong> –¢—Ä–∞–∫—Ç–∏—Ä—â–∏–∫</p>
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> 25</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–ª—É—Ä–æ—Å–ª–∏–∫ —Å—Ä–µ–¥–Ω–∏—Ö –ª–µ—Ç, –≤–ª–∞–¥–µ–ª–µ—Ü —Ç–∞–≤–µ—Ä–Ω—ã "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω". –ó–Ω–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏—Å—Ç–æ—Ä–∏–π –∏ —Å–ª—É—Ö–æ–≤. –¢–æ—Ä–≥—É–µ—Ç –µ–¥–æ–π, –Ω–∞–ø–∏—Ç–∫–∞–º–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–Ω–∞—Ç—ã –¥–ª—è –Ω–æ—á–ª–µ–≥–∞.</p>
                            <p><strong>–£—Å–ª—É–≥–∏:</strong> –ü—Ä–æ–¥–∞–∂–∞ –µ–¥—ã –∏ –Ω–∞–ø–∏—Ç–∫–æ–≤, –∞—Ä–µ–Ω–¥–∞ –∫–æ–º–Ω–∞—Ç, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥–æ—Ä–æ–¥–µ</p>
                        `
                    }
                },
                player: {
                    shadowkiller: {
                        title: 'üó° –¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞',
                        content: `
                            <p><strong>–ö–ª–∞—Å—Å:</strong> –†–∞–∑–±–æ–π–Ω–∏–∫</p>
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> 23</p>
                            <p><strong>–ö–ª–∞–Ω:</strong> –ß–µ—Ä–Ω—ã–µ –î—Ä–∞–∫–æ–Ω—ã</p>
                            <p><strong>PvP —Ä–µ–π—Ç–∏–Ω–≥:</strong> 1,850</p>
                            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> –í –ø–æ–∏—Å–∫–µ –≥—Ä—É–ø–ø—ã</p>
                            <p><strong>–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞:</strong> –ö–æ–∂–∞–Ω–∞—è –±—Ä–æ–Ω—è, –æ—Ç—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∏–Ω–∂–∞–ª—ã</p>
                        `
                    },
                    firevalkyrie: {
                        title: 'üî• –û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è',
                        content: `
                            <p><strong>–ö–ª–∞—Å—Å:</strong> –ú–∞–≥</p>
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> 18</p>
                            <p><strong>–ö–ª–∞–Ω:</strong> –°—Ç–∞–ª—å–Ω—ã–µ –í–æ–ª–∫–∏</p>
                            <p><strong>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:</strong> –û–≥–Ω–µ–Ω–Ω–∞—è –º–∞–≥–∏—è</p>
                            <p><strong>–°—Ç–∞—Ç—É—Å:</strong> –ò–∑—É—á–∞–µ—Ç –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è</p>
                            <p><strong>–≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞:</strong> –ú–∞–Ω—Ç–∏—è –º–∞–≥–∞, –æ–≥–Ω–µ–Ω–Ω—ã–π –ø–æ—Å–æ—Ö</p>
                        `
                    }
                },
                enemy: {
                    rat1: {
                        title: 'üêÄ –ù–∞–≥–ª–∞—è –∫—Ä—ã—Å–∞',
                        content: `
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> 2</p>
                            <p><strong>–ó–¥–æ—Ä–æ–≤—å–µ:</strong> 25/25</p>
                            <p><strong>–£—Ä–æ–Ω:</strong> 3-5</p>
                            <p><strong>–ó–∞—â–∏—Ç–∞:</strong> 1</p>
                            <p><strong>–î—Ä–æ–ø:</strong> –ö—Ä—ã—Å–∏–Ω—ã–π —Ö–≤–æ—Å—Ç, –º–µ–ª–∫–∏–µ –º–æ–Ω–µ—Ç—ã</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û–±—ã—á–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞—è –∫—Ä—ã—Å–∞, —Å—Ç–∞–≤—à–∞—è –Ω–∞–≥–ª–æ–π –æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –∫–æ—Ä–º–µ–∂–∫–∏. –ù–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–µ—Ä—å–µ–∑–Ω–æ–π —É–≥—Ä–æ–∑—ã.</p>
                        `
                    },
                    rat2: {
                        title: 'üêÄ –ñ–∏—Ä–Ω–∞—è –∫—Ä—ã—Å–∞',
                        content: `
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> 3</p>
                            <p><strong>–ó–¥–æ—Ä–æ–≤—å–µ:</strong> 40/40</p>
                            <p><strong>–£—Ä–æ–Ω:</strong> 4-7</p>
                            <p><strong>–ó–∞—â–∏—Ç–∞:</strong> 2</p>
                            <p><strong>–î—Ä–æ–ø:</strong> –ö—Ä—ã—Å–∏–Ω—ã–π —Ö–≤–æ—Å—Ç, –º–æ–Ω–µ—Ç—ã, –∏–Ω–æ–≥–¥–∞ —Å—ã—Ä</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ö—Ä—É–ø–Ω–∞—è –∫—Ä—ã—Å–∞, –æ—Ç–∫–æ—Ä–º–∏–≤—à–∞—è—Å—è –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –ø–∏—â–∏. –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞ —á–µ–º –æ–±—ã—á–Ω—ã–µ –∫—Ä—ã—Å—ã.</p>
                        `
                    }
                },
                item: {
                    coin: {
                        title: 'ü™ô –ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞',
                        content: `
                            <p><strong>–¢–∏–ø:</strong> –í–∞–ª—é—Ç–∞</p>
                            <p><strong>–¶–µ–Ω–Ω–æ—Å—Ç—å:</strong> 5 –∑–æ–ª–æ—Ç–∞</p>
                            <p><strong>–í–µ—Å:</strong> 0.1 –∫–≥</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –û–±—ã—á–Ω–∞—è –∑–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞ –∫–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–∞. –ù–∞ –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω –¥—Ä–∞–∫–æ–Ω, –Ω–∞ –¥—Ä—É–≥–æ–π - –∫–æ—Ä–æ–Ω–∞. –ö—Ç–æ-—Ç–æ —É—Ä–æ–Ω–∏–ª –µ–µ –∏ –Ω–µ –∑–∞–º–µ—Ç–∏–ª.</p>
                        `
                    },
                    dagger: {
                        title: 'üó° –°—Ç–∞—Ä—ã–π –∫–∏–Ω–∂–∞–ª',
                        content: `
                            <p><strong>–¢–∏–ø:</strong> –û—Ä—É–∂–∏–µ (–ö–∏–Ω–∂–∞–ª)</p>
                            <p><strong>–£—Ä–æ–Ω:</strong> 5-8</p>
                            <p><strong>–°–∫–æ—Ä–æ—Å—Ç—å:</strong> –ë—ã—Å—Ç—Ä–∞—è</p>
                            <p><strong>–ü—Ä–æ—á–Ω–æ—Å—Ç—å:</strong> 45/100</p>
                            <p><strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> –õ–æ–≤–∫–æ—Å—Ç—å 8</p>
                            <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> –ü–æ—Ç–µ—Ä—Ç—ã–π –∫–∏–Ω–∂–∞–ª —Å –∑–∞—Ç—É–ø–∏–≤—à–∏–º—Å—è –ª–µ–∑–≤–∏–µ–º. –ö–æ–≥–¥–∞-—Ç–æ –±—ã–ª —Ö–æ—Ä–æ—à–∏–º –æ—Ä—É–∂–∏–µ–º, –Ω–æ —Ç–µ–ø–µ—Ä—å –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ä–µ–º–æ–Ω—Ç–µ.</p>
                        `
                    }
                }
            };
            
            const info = infoData[type]?.[id];
            if (info) {
                document.getElementById('modalTitle').innerHTML = info.title;
                document.getElementById('modalContent').innerHTML = info.content;
                document.getElementById('infoModal').classList.remove('hidden');
            }
        }
        
        function closeModal() {
            document.getElementById('infoModal').classList.add('hidden');
        }
        
        // Location navigation
        function goToLocation(locationId) {
            const locations = {
                'square': '–ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å',
                'rooms': '–ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ—è–ª—å—Ü–µ–≤',
                'cellar': '–ü–æ–¥–≤–∞–ª —Ç–∞–≤–µ—Ä–Ω—ã'
            };
            
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', `–í—ã –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å –≤: ${locations[locationId]}`, 'blue');
            // Here you would typically load the new location
        }
        
        // Quick actions
        function openInventory() {
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–û—Ç–∫—Ä—ã—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (—Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)', 'blue');
        }
        
        function openSpells() {
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–û—Ç–∫—Ä—ã—Ç–∞ –∫–Ω–∏–≥–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π (—Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)', 'blue');
        }
        
        function openQuests() {
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–û—Ç–∫—Ä—ã—Ç –∂—É—Ä–Ω–∞–ª –∫–≤–µ—Å—Ç–æ–≤ (—Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)', 'blue');
        }
        
        function openSettings() {
            addChatMessage('–°–∏—Å—Ç–µ–º–∞', '–û—Ç–∫—Ä—ã—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ñ—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)', 'blue');
        }
        
        // Simulate game activity
        function simulateActivity() {
            setInterval(() => {
                // Random events
                if (Math.random() < 0.1) { // 10% chance every 5 seconds
                    const events = [
                        '–ë–∞—Ä–º–µ–Ω –Ω–∞–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é –ø–æ—Ä—Ü–∏—é —ç–ª—è',
                        '–ö—Ä—ã—Å–∞ –ø—Ä–æ–±–µ–≥–∞–µ—Ç –ø–æ–¥ —Å—Ç–æ–ª–æ–º',
                        '–ö–∞–º–∏–Ω –ø–æ—Ç—Ä–µ—Å–∫–∏–≤–∞–µ—Ç, —Ä–∞–∑–±—Ä–∞—Å—ã–≤–∞—è –∏—Å–∫—Ä—ã',
                        '–ö—Ç–æ-—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞–≤–µ—Ä–Ω—É',
                        '–°–ª—ã—à–µ–Ω —Å–º–µ—Ö –∏–∑ –¥–∞–ª—å–Ω–µ–≥–æ —É–≥–ª–∞'
                    ];
                    const event = events[Math.floor(Math.random() * events.length)];
                    addChatMessage('–û–∫—Ä—É–∂–µ–Ω–∏–µ', event, 'dragon');
                }
            }, 5000);
        }
    </script>
    
</body>
</html>
