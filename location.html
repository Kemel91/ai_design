<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–∫–∞—Ü–∏—è - –ê–º—É–ª–µ—Ç –¥—Ä–∞–∫–æ–Ω–∞</title>
    <meta name="description" content="–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–∫–∞—Ü–∏–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–π MMORPG - –ê–º—É–ª–µ—Ç –¥—Ä–∞–∫–æ–Ω–∞">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="scripts.js" as="script">
    <link rel="preload" href="components.js" as="script">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dragon: {
                            50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8',
                            400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46',
                            800: '#27272a', 900: '#18181b',
                        },
                        blood: {
                            50: '#fef2f2', 100: '#fee2e2', 200: '#fecaca', 300: '#fca5a5',
                            400: '#f87171', 500: '#ef4444', 600: '#dc2626', 700: '#b91c1c',
                            800: '#991b1b', 900: '#7f1d1d',
                        },
                        gold: {
                            50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d',
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
                            800: '#92400e', 900: '#78350f',
                        }
                    },
                    fontFamily: { 'medieval': ['serif'] },
                    screens: { 'xs': '475px' }
                }
            }
        }
    </script>
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="styles.css">
    
    <style>
        .location-container {
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
        }
        
        .main-content {
            flex: 1;
            padding-bottom: 80px;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80px;
            background: linear-gradient(145deg, rgba(20, 20, 25, 0.98), rgba(10, 10, 15, 0.95));
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(245, 158, 11, 0.3);
            z-index: 30;
        }
        
        .nav-tab {
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .nav-tab.active {
            background: linear-gradient(45deg, rgba(127, 29, 29, 0.3), rgba(185, 28, 28, 0.2));
            border-top: 2px solid #d97706;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .entity-card {
            transition: all 0.3s ease;
            min-height: 60px;
        }
        
        .entity-card:active {
            transform: scale(0.98);
            background: linear-gradient(145deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));
        }
        
        .action-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(145deg, rgba(20, 20, 25, 0.98), rgba(10, 10, 15, 0.95));
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(245, 158, 11, 0.3);
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 40;
            max-height: 50vh;
            overflow-y: auto;
        }
        
        .action-sheet.show {
            transform: translateY(0);
        }
        
        .action-sheet-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 35;
            display: none;
        }
        
        .action-sheet-overlay.show {
            display: block;
        }
        
        .swipe-indicator {
            width: 40px;
            height: 4px;
            background: rgba(245, 158, 11, 0.3);
            border-radius: 2px;
            margin: 8px auto;
        }
        
        .location-journal {
            background: linear-gradient(145deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));
            border-left: 4px solid #d97706;
        }
        
        .sticky-location {
            position: sticky;
            top: 8px;
            z-index: 10;
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="dragon-bg text-white" style="background-color: #0a0a0a !important;">
    
    <!-- Location Container -->
    <div class="location-container">
        
        <!-- Header -->
        <div class="dragon-card rounded-b-2xl p-4 mx-2 mt-2">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                    <div class="w-12 h-12 bg-gradient-to-br from-gold-500 to-gold-700 rounded-full flex items-center justify-center text-xl font-bold mr-3">
                        ‚öî
                    </div>
                    <div>
                        <h1 class="font-medieval font-bold text-gold-400 text-lg">–ö—Ä–æ–≤–∞–≤—ã–π–ö–ª–∏–Ω–æ–∫</h1>
                        <p class="text-sm text-dragon-300">–£—Ä.15 –í–æ–∏–Ω ‚Ä¢ –°—Ç–∞–ª—å–Ω—ã–µ –í–æ–ª–∫–∏</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-gold-400 font-semibold text-lg">1,250</div>
                    <div class="text-sm text-dragon-400">üí∞ –∑–æ–ª–æ—Ç–∞</div>
                </div>
            </div>
        </div>
        
        <!-- Fixed Location Info (Always Visible) -->
        <div class="dragon-card rounded-xl p-4 mx-2 mt-2 sticky-location">
            <div class="flex items-center justify-between mb-3">
                <h2 class="font-medieval text-lg font-bold text-gold-400 flex items-center" id="currentLocation">
                    üç∫ –¢–∞–≤–µ—Ä–Ω–∞ "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω"
                </h2>
                <button class="btn-secondary px-3 py-1 rounded-lg font-medieval text-xs" onclick="window.location.href='game.html'">
                    üéÆ –ò–≥—Ä–∞
                </button>
            </div>
            
            <!-- Location Journal (Priority) -->
            <div class="location-journal rounded-lg p-3">
                <h3 class="font-medieval font-semibold text-gold-400 mb-2 text-xs flex items-center">
                    üìã –°–æ–±—ã—Ç–∏—è
                </h3>
                <div class="space-y-1 max-h-16 overflow-y-auto text-xs" id="locationJournal">
                    <div class="text-gold-300">üç∫ –í—ã –≤—Ö–æ–¥–∏—Ç–µ –≤ —Ç–∞–≤–µ—Ä–Ω—É "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω"</div>
                    <div class="text-dragon-300">üî• –ö–∞–º–∏–Ω –ø–æ—Ç—Ä–µ—Å–∫–∏–≤–∞–µ—Ç, —Ä–∞–∑–±—Ä–∞—Å—ã–≤–∞—è –∏—Å–∫—Ä—ã</div>
                    <div class="text-dragon-300">üéµ –ë–∞—Ä–º–µ–Ω –Ω–∞–ø–µ–≤–∞–µ—Ç –≤–µ—Å–µ–ª—É—é –ø–µ—Å–Ω—é</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content px-2">
            
            <!-- Tab Content -->
            <div class="mt-2">
                
                <!-- Entities Tab -->
                <div id="entitiesTab" class="tab-content active">
                    <div class="dragon-card rounded-xl p-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üëÅ –í –ª–æ–∫–∞—Ü–∏–∏</h3>
                        <div class="space-y-2" id="locationEntities">
                            
                            <!-- NPCs -->
                            <div class="entity-card p-3 rounded-lg border-l-4 border-gold-500 cursor-pointer" onclick="showActionSheet('npc', 'barman')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üßî</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-gold-400 text-sm">–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥</span>
                                            <p class="text-xs text-dragon-300">–ü–æ–ª—É—Ä–æ—Å–ª–∏–∫-—Ç—Ä–∞–∫—Ç–∏—Ä—â–∏–∫</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-gold-500">NPC</span>
                                </div>
                            </div>
                            
                            <!-- Players -->
                            <div class="entity-card p-3 rounded-lg border-l-4 border-green-500 cursor-pointer" onclick="showActionSheet('player', 'shadowkiller')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üó°</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-green-400 text-sm">–¢–µ–Ω–µ–≤–æ–π–£–±–∏–π—Ü–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä.23 –†–∞–∑–±–æ–π–Ω–∏–∫</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-green-500">–ò–≥—Ä–æ–∫</span>
                                </div>
                            </div>
                            
                            <div class="entity-card p-3 rounded-lg border-l-4 border-green-500 cursor-pointer" onclick="showActionSheet('player', 'firevalkyrie')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üî•</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-green-400 text-sm">–û–≥–Ω–µ–Ω–Ω–∞—è–í–∞–ª—å–∫–∏—Ä–∏—è</span>
                                            <p class="text-xs text-dragon-300">–£—Ä.18 –ú–∞–≥</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-green-500">–ò–≥—Ä–æ–∫</span>
                                </div>
                            </div>
                            
                            <!-- Enemies -->
                            <div class="entity-card p-3 rounded-lg border-l-4 border-red-500 cursor-pointer" onclick="showActionSheet('enemy', 'rat1')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üêÄ</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-red-400 text-sm">–ù–∞–≥–ª–∞—è –∫—Ä—ã—Å–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä.2, –≥—Ä—ã–∑–µ—Ç –∫–æ—Å—Ç—å</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-red-500">–í—Ä–∞–≥</span>
                                </div>
                            </div>
                            
                            <div class="entity-card p-3 rounded-lg border-l-4 border-red-500 cursor-pointer" onclick="showActionSheet('enemy', 'rat2')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üêÄ</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-red-400 text-sm">–ñ–∏—Ä–Ω–∞—è –∫—Ä—ã—Å–∞</span>
                                            <p class="text-xs text-dragon-300">–£—Ä.3, —à–∞—Ä–∏—Ç—Å—è –ø–æ —É–≥–ª–∞–º</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-red-500">–í—Ä–∞–≥</span>
                                </div>
                            </div>
                            
                            <!-- Items -->
                            <div class="entity-card p-3 rounded-lg border-l-4 border-purple-500 cursor-pointer" onclick="showActionSheet('item', 'coin')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">ü™ô</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-purple-400 text-sm">–ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞</span>
                                            <p class="text-xs text-dragon-300">–ë–ª–µ—Å—Ç–∏—Ç –Ω–∞ –ø–æ–ª—É</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-purple-500">–ü—Ä–µ–¥–º–µ—Ç</span>
                                </div>
                            </div>
                            
                            <div class="entity-card p-3 rounded-lg border-l-4 border-purple-500 cursor-pointer" onclick="showActionSheet('item', 'dagger')">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <span class="text-xl mr-3">üó°</span>
                                        <div>
                                            <span class="font-medieval font-semibold text-purple-400 text-sm">–°—Ç–∞—Ä—ã–π –∫–∏–Ω–∂–∞–ª</span>
                                            <p class="text-xs text-dragon-300">–õ–µ–∂–∏—Ç –≤ —É–≥–ª—É</p>
                                        </div>
                                    </div>
                                    <span class="text-xs text-purple-500">–ü—Ä–µ–¥–º–µ—Ç</span>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                
                <!-- Location Info Tab -->
                <div id="locationInfoTab" class="tab-content">
                    <div class="dragon-card rounded-xl p-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üìç –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–∫–∞—Ü–∏–∏</h3>
                        
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-dragon-300">–ù–∞–∑–≤–∞–Ω–∏–µ:</span>
                                <span class="text-gold-400 font-semibold">–¢–∞–≤–µ—Ä–Ω–∞ "–ü—å—è–Ω—ã–π –î—Ä–∞–∫–æ–Ω"</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-dragon-300">–¢–∏–ø:</span>
                                <span class="text-blue-400 font-semibold">–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-dragon-300">–û–ø–∞—Å–Ω–æ—Å—Ç—å:</span>
                                <span class="text-green-400 font-semibold">üü¢ –ë–µ–∑–æ–ø–∞—Å–Ω–æ</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-dragon-300">–í–ª–∞–¥–µ–ª–µ—Ü:</span>
                                <span class="text-gold-400 font-semibold">–ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dragon-card rounded-xl p-4 mt-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üìù –û–ø–∏—Å–∞–Ω–∏–µ</h3>
                        <p class="text-sm text-dragon-200 leading-relaxed">
                            –£—é—Ç–Ω–∞—è —Ç–∞–≤–µ—Ä–Ω–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞, –≥–¥–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ –∏ –º–µ—Å—Ç–Ω—ã–µ –∂–∏—Ç–µ–ª–∏. 
                            –¢–µ–ø–ª—ã–π —Å–≤–µ—Ç –∫–∞–º–∏–Ω–∞ –æ—Å–≤–µ—â–∞–µ—Ç –¥–µ—Ä–µ–≤—è–Ω–Ω—ã–µ —Å—Ç–æ–ª—ã, –∞ –∑–∞–ø–∞—Ö –∂–∞—Ä–µ–Ω–æ–≥–æ –º—è—Å–∞ –∏ —Å–≤–µ–∂–µ–≥–æ —ç–ª—è 
                            –Ω–∞–ø–æ–ª–Ω—è–µ—Ç –≤–æ–∑–¥—É—Ö. –ë–∞—Ä–º–µ–Ω –¢–æ—Ä–≤–∞–ª—å–¥ - –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ø–æ–ª—É—Ä–æ—Å–ª–∏–∫, –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã–π 
                            –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≥–æ—Ä—è—á—É—é –µ–¥—É.
                        </p>
                    </div>
                </div>
                
                <!-- Exits Tab -->
                <div id="exitsTab" class="tab-content">
                    <div class="dragon-card rounded-xl p-4">
                        <h3 class="font-medieval font-semibold text-gold-400 mb-3 text-sm">üö™ –í—ã—Ö–æ–¥—ã</h3>
                        
                        <div class="space-y-3">
                            <button class="w-full location-exit btn-secondary px-4 py-3 rounded-lg font-medieval text-sm flex items-center justify-between" onclick="goToLocation('square')">
                                <span>üèõ –ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å</span>
                                <span class="text-xs text-dragon-400">–£–ª–∏—Ü–∞</span>
                            </button>
                            <button class="w-full location-exit btn-secondary px-4 py-3 rounded-lg font-medieval text-sm flex items-center justify-between" onclick="goToLocation('rooms')">
                                <span>üõè –ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ—è–ª—å—Ü–µ–≤</span>
                                <span class="text-xs text-dragon-400">–û—Ç–¥—ã—Ö</span>
                            </button>
                            <button class="w-full location-exit btn-secondary px-4 py-3 rounded-lg font-medieval text-sm flex items-center justify-between" onclick="goToLocation('cellar')">
                                <span>üï≥ –ü–æ–¥–≤–∞–ª —Ç–∞–≤–µ—Ä–Ω—ã</span>
                                <span class="text-xs text-dragon-400">–ü–æ–¥–∑–µ–º–µ–ª—å–µ</span>
                            </button>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="flex h-full">
                <button class="nav-tab flex-1 flex flex-col items-center justify-center active" onclick="switchTab('entities')">
                    <span class="text-2xl mb-1">üëÅ</span>
                    <span class="text-xs font-medieval">–û–±—ä–µ–∫—Ç—ã</span>
                </button>
                <button class="nav-tab flex-1 flex flex-col items-center justify-center" onclick="switchTab('locationInfo')">
                    <span class="text-2xl mb-1">üìç</span>
                    <span class="text-xs font-medieval">–ò–Ω—Ñ–æ</span>
                </button>
                <button class="nav-tab flex-1 flex flex-col items-center justify-center" onclick="switchTab('exits')">
                    <span class="text-2xl mb-1">üö™</span>
                    <span class="text-xs font-medieval">–í—ã—Ö–æ–¥—ã</span>
                </button>
                <button class="nav-tab flex-1 flex flex-col items-center justify-center" onclick="window.location.href='character.html'">
                    <span class="text-2xl mb-1">üë§</span>
                    <span class="text-xs font-medieval">–ü–µ—Ä—Å–æ–Ω–∞–∂</span>
                </button>
            </div>
        </div>
        
    </div>
    
    <!-- Action Sheet Overlay -->
    <div id="actionSheetOverlay" class="action-sheet-overlay" onclick="hideActionSheet()"></div>
    
    <!-- Action Sheet -->
    <div id="actionSheet" class="action-sheet">
        <div class="swipe-indicator"></div>
        <div class="p-4">
            <h3 class="font-medieval font-semibold text-gold-400 mb-4 text-center" id="actionSheetTitle">–î–µ–π—Å—Ç–≤–∏—è</h3>
            <div id="actionSheetContent" class="space-y-2"></div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="scripts.js"></script>
    <script src="components.js"></script>
    
    <script>
        // Initialize location page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–∫–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
        
        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked button
            event.target.closest('.nav-tab').classList.add('active');
        }
        
        // Action sheet system
        function showActionSheet(type, id) {
            const overlay = document.getElementById('actionSheetOverlay');
            const sheet = document.getElementById('actionSheet');
            const title = document.getElementById('actionSheetTitle');
            const content = document.getElementById('actionSheetContent');
            
            // Generate content based on type
            let sheetHTML = '';
            let sheetTitle = '';
            
            switch(type) {
                case 'npc':
                    sheetTitle = 'üßî –î–µ–π—Å—Ç–≤–∏—è —Å NPC';
                    sheetHTML = `
                        <button onclick="talkToNPC('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å</button>
                        <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                        <button onclick="tradeWithNPC('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üõí –¢–æ—Ä–≥–æ–≤–∞—Ç—å</button>
                    `;
                    break;
                    
                case 'player':
                    sheetTitle = 'üë§ –î–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–∫–æ–º';
                    sheetHTML = `
                        <button onclick="talkToPlayer('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üí¨ –°–∫–∞–∑–∞—Ç—å</button>
                        <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                        <button onclick="attackPlayer('${id}')" class="w-full btn-dragon px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">‚öî –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                        <button onclick="inviteToGroup('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üë• –í –≥—Ä—É–ø–ø—É</button>
                    `;
                    break;
                    
                case 'enemy':
                    sheetTitle = 'üêÄ –î–µ–π—Å—Ç–≤–∏—è —Å –≤—Ä–∞–≥–æ–º';
                    sheetHTML = `
                        <button onclick="attackEnemy('${id}')" class="w-full btn-dragon px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">‚öî –ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
                        <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                        <button onclick="castSpellOn('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üîÆ –ó–∞–∫–ª–∏–Ω–∞–Ω–∏–µ</button>
                    `;
                    break;
                    
                case 'item':
                    sheetTitle = 'üì¶ –î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–µ–¥–º–µ—Ç–æ–º';
                    sheetHTML = `
                        <button onclick="takeItem('${id}')" class="w-full btn-dragon px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üì¶ –í–∑—è—Ç—å</button>
                        <button onclick="showInfo('${type}', '${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">üëÅ –û—Å–º–æ—Ç—Ä–µ—Ç—å</button>
                        <button onclick="useItem('${id}')" class="w-full btn-secondary px-4 py-3 rounded-lg font-medieval text-sm mb-2 min-h-[50px]">‚ú® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                    `;
                    break;
            }
            
            title.textContent = sheetTitle;
            content.innerHTML = sheetHTML;
            
            // Show action sheet
            overlay.classList.add('show');
            sheet.classList.add('show');
        }
        
        function hideActionSheet() {
            const overlay = document.getElementById('actionSheetOverlay');
            const sheet = document.getElementById('actionSheet');
            overlay.classList.remove('show');
            sheet.classList.remove('show');
        }
        
        // Action handlers
        function talkToNPC(id) {
            hideActionSheet();
            addLocationJournal('–í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ —Å –±–∞—Ä–º–µ–Ω–æ–º', 'üí¨');
        }
        
        function talkToPlayer(id) {
            hideActionSheet();
            addLocationJournal(`–í—ã –æ–±—Ä–∞—â–∞–µ—Ç–µ—Å—å –∫ –∏–≥—Ä–æ–∫—É ${id}`, 'üí¨');
        }
        
        function attackPlayer(id) {
            hideActionSheet();
            addLocationJournal(`–ù–∞—á–∞–ª—Å—è PvP –±–æ–π —Å –∏–≥—Ä–æ–∫–æ–º ${id}`, '‚öî');
        }
        
        function attackEnemy(id) {
            hideActionSheet();
            const enemies = {
                'rat1': '–ù–∞–≥–ª—É—é –∫—Ä—ã—Å—É',
                'rat2': '–ñ–∏—Ä–Ω—É—é –∫—Ä—ã—Å—É'
            };
            addLocationJournal(`–í—ã –∞—Ç–∞–∫—É–µ—Ç–µ ${enemies[id]}`, '‚öî');
        }
        
        function takeItem(id) {
            hideActionSheet();
            const items = {
                'coin': '–ó–æ–ª–æ—Ç—É—é –º–æ–Ω–µ—Ç—É (+5 –∑–æ–ª–æ—Ç–∞)',
                'dagger': '–°—Ç–∞—Ä—ã–π –∫–∏–Ω–∂–∞–ª'
            };
            addLocationJournal(`–í—ã –ø–æ–¥–±–∏—Ä–∞–µ—Ç–µ ${items[id]}`, 'üì¶');
        }
        
        function showInfo(type, id) {
            hideActionSheet();
            addLocationJournal(`–í—ã –æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç–µ ${type} ${id}`, 'üëÅ');
        }
        
        // Location navigation
        function goToLocation(locationId) {
            const locations = {
                'square': 'üèõ –ì–æ—Ä–æ–¥—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å',
                'rooms': 'üõè –ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ—è–ª—å—Ü–µ–≤',
                'cellar': 'üï≥ –ü–æ–¥–≤–∞–ª —Ç–∞–≤–µ—Ä–Ω—ã'
            };
            
            addLocationJournal(`–í—ã –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç–µ—Å—å –≤: ${locations[locationId]}`, 'üö™');
            
            // Redirect to game
            setTimeout(() => {
                window.location.href = 'game.html';
            }, 1000);
        }
        
        // Add message to location journal
        function addLocationJournal(message, icon = 'üìã') {
            const journal = document.getElementById('locationJournal');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'text-dragon-300';
            messageDiv.innerHTML = `${icon} ${message}`;
            journal.appendChild(messageDiv);
            
            // Keep only last 5 messages
            while (journal.children.length > 5) {
                journal.removeChild(journal.firstChild);
            }
            
            // Scroll to bottom
            journal.scrollTop = journal.scrollHeight;
        }
    </script>
    
</body>
</html>
